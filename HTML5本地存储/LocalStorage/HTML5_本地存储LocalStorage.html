<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>HTML5本地存储</title>
	</head>
	
	<style type="text/css">
		html,body{margin: 0px; padding: 0px; font-family: "微软雅黑"}
		div{ width:980px; height:200px; text-align: left; margin: auto;}
	</style>
	<body>
		<center>
			<h1>HTML5本地存储</h1>
			<hr />
			<p style="color: red;">需要注意的是，HTML5本地存储只能存字符串，任何格式存储的时候都会被自动转为字符串，所以读取的时候，需要自己进行类型的转换。不同的浏览器有不同的存储位置，不能相互访问！</p>
			<div>
				HTML5中提供了localStorage对象可以将数据长期保存在客户端，直到人为清除。
				localStorage提供了几个方法<br />
				1、存储：localStorage.setItem(key,value)
				如果key存在时，更新value
				<br />
				2、获取：localStorage.getItem(key)
				如果key不存在返回null
				<br />
				3、删除：localStorage.removeItem(key)
				一旦删除，key对应的数据将会全部删除
				<br />
				4、全部清除：localStorage.clear()
				某些时候使用removeItem逐个删除太麻烦，可以使用clear,执行的后果是会清除所有localStorage对象保存的数据
				<br />
				5、遍历localStorage存储的key
				.length 数据总量，例：localStorage.length
				.key(index) 获取key，例：var key=localStorage.key(index);
				<br />
				6、存储JSON格式数据
				JSON.stringify(data)  将一个对象转换成JSON格式的数据串,返回转换后的串
				JSON.parse(data) 将数据解析成对象，返回解析后的对象
				<br />
				备注：localStorage存数的数据是不能跨浏览器共用的，一个浏览器只能读取各自浏览器的数据,储存空间5M。</div><br /><br /><br />
			
			<textarea id="textarea1" rows="8" cols="50" placeholder="请输入要存储的内容！"></textarea><br />
			<input type="button" name="but" id="but" value="保存数据" />
			
			<br /><br />
			<textarea id="textarea2" rows="8" cols="50"></textarea><br />
			<input type="button" name="but" id="but2" value="读取数据" />
			
			<br /><br />
			<textarea id="textarea3" rows="8" cols="50"></textarea><br />
			<input type="button" name="but" id="but3" value="清除数据" />
			<input type="button" name="but" id="but4" value="清除所有" />
		</center>
	</body>
	<script type="text/javascript">

		document.getElementById("but").onclick = function()
		{
			if(window.localStorage)//如果浏览器支持localStrage
			{
				if(document.getElementById("textarea1").value != "")
				{
				 	localStorage.setItem("mupiao",document.getElementById("textarea1").value);
				 	alert("保存成功！");
				 	document.getElementById("textarea1").value = "";
				}
				else
				{
					alert('对不起：你还没有输入内容或数据哦！');
				}
			}
			else
			{
				alert('对不起：该浏览器不支持localStorage(本地存储)功能！快升级浏览器吧！');
			}
		}
		
		document.getElementById("but2").onclick = function()
		{
			if(localStorage.getItem("mupiao") == "")
			{
				alert("对不起：你还没有保存数据哦！");
			}
			else
			{
				document.getElementById("textarea2").value = localStorage.getItem("mupiao");
				document.getElementById("textarea3").value = localStorage.getItem("mupiao");
			}
		}
		
		
		document.getElementById("but3").onclick = function()
		{
			if(localStorage.getItem("mupiao") != "")
			{
				localStorage.removeItem("mupiao");
				document.getElementById("textarea2").value = "";
				document.getElementById("textarea3").value = "";
				alert("清除成功！");
			}
			else
			{
				alert("对不起：数据已经被清除了哦！");
			}
			
		}
		
		document.getElementById("but4").onclick = function()
		{
			if(llocalStorage.getItem("mupiao") != "")
			{
				localStorage.clear();
				document.getElementById("textarea2").value = "";
				document.getElementById("textarea3").value = "";
				alert("清除成功！");
			}
			else
			{
				alert("对不起：数据已经被清除了哦！");
			}

		}
		
	</script>
</html>
